fxcm.marketScanner=new function(){var o={wrapper:"market-scanner",symbolIndicators:{"200EMA":!0,"30EMA":!1,STOCH:!0,RSI:!1,CCI:!0,MACD:!0,SSI:!0},symbolRates:["EUR/USD","GBP/USD","XAU/USD","USD/JPY","GER30","US30","AUD/USD","EUR/JPY","USD/CAD","NZD/USD","GBP/JPY","UK100","USD/CHF","AUD/JPY","USOIL","FRA40","SPX500","EUR/CAD","EUR/AUD"],numRatesToShow:5,language:"en",errorMSG:"No data to display. Please check again later",labelSet:{en:{_language:"en",_symbToScan:{title:"Symbols to Scan",options:[["All","All"],["CFD","CFD"],["Forex","Forex"]]},_timeFrame:{title:"Time Frame",options:[["Short","Short (15 min)","15min"],["Medium","Medium (1 hour)","1hour"],["Long","Long (1 day)","1day"]]},table:{head:["Strength","Symbol","Signal",'<a href="javascript:void(0)" data-toggle="expandOrCollapse"><i class="plus square outline icon"></i></a>'],details:{title:"Details",up:"Up",down:"Down",neutral:"Neutral",off:"Off"},signal:{buy:"Buy",sell:"Sell",none:"None"}},submitBtn:"Scan",lastUpdated:"Last Scan:",timezoneFormat:"MM-DD-YYYY, h:mm:ss a"},ar:{_language:"ar",_symbToScan:{title:"مسح الرموز التالية",options:[["All","كل الرموز"],["CFD","العقود الفرقية"],["Forex","أزواج العملات - الفوركس"]]},_timeFrame:{title:"الفترة الزمنية",options:[["Short","قصير ( خمسة عشر دقيقة)","15min"],["Medium","متوسط (ساعة واحدة)","1hour"],["Long","طويل (يوم واحد)","1day"]]},table:{head:["قوة الإشارة","الرمز","الإشارة",'<a href="javascript:void(0)" data-toggle="expandOrCollapse"><i class="plus square outline icon"></i></a>'],details:{title:"التفاصيل",up:"صعود",down:"هبوط",neutral:"محايد",off:"اغلق"},signal:{buy:"شراء",sell:"بيع",none:"لا شيئ"}},submitBtn:"المسح",lastUpdated:"المسح الأخير",timezoneFormat:"DD-MM-YYYY, h:mm:ss a"},de:{_language:"de",_symbToScan:{title:"Symbole zum Scannen",options:[["All","Alle"],["CFD","CFDs"],["Forex","Forex"]]},_timeFrame:{title:"Zeitebene",options:[["Short","Kurz (15 Minuten)","15min"],["Medium","Medium (1 Stunde)","1hour"],["Long","Lang (1 Tag)","1day"]]},table:{head:["Stärke","Symbol","Signal",'<a href="javascript:void(0)" data-toggle="expandOrCollapse"><i class="plus square outline icon"></i></a>'],details:{title:"Details",up:"Steigend",down:"Fallend",neutral:"Neutral",off:"Aus"},signal:{buy:"Kaufen",sell:"Verkaufen",none:"Kein signal"}},submitBtn:"Scannen",lastUpdated:"Letzter Scan:",timezoneFormat:"DD-MM-YYYY, h:mm:ss a"},fr:{_language:"fr",_symbToScan:{title:"Tous les symboles",options:[["All","Tout"],["CFD","CFD"],["Forex","Forex"]]},_timeFrame:{title:"P&eacute;riode de temps",options:[["Short","Court (15 min)","15min"],["Medium","Moyen (1 heure)","1hour"],["Long","Long (1 jour)","1day"]]},table:{head:["Force","Symbole à scanner","Signal",'<a href="javascript:void(0)" data-toggle="expandOrCollapse"><i class="plus square outline icon"></i></a>'],details:{title:"Détails",up:"Haussier",down:"Baissier",neutral:"Neutre",off:"Désactivé"},signal:{buy:"Achat",sell:"Vente",none:"Aucun signal"}},submitBtn:"Scanner",lastUpdated:"Dernier scan:",timezoneFormat:"DD-MM-YYYY, h:mm:ss a"},it:{_language:"it",_symbToScan:{title:"Strumenti da scannerizzare",options:[["All","Tutti"],["CFD","CFD"],["Forex","Forex"]]},_timeFrame:{title:"Time Frame",options:[["Short","Breve (15 minuti)","15min"],["Medium","Medio (1 ora)","1hour"],["Long","Lungo (1 giorno)","1day"]]},table:{head:["Forza","Strumento","Segnale",'<a href="javascript:void(0)" data-toggle="expandOrCollapse"><i class="plus square outline icon"></i></a>'],details:{title:"Dettagli",up:"Su",down:"Gi&ugrave",neutral:"Neutrale",off:"Off"},signal:{buy:"Compra",sell:"Vendi",none:"Neutrale"}},submitBtn:"Scan",lastUpdated:"Ultimo Scan:",timezoneFormat:"DD-MM-YYYY, h:mm:ss a"},es:{_language:"es",_symbToScan:{title:"Símbolos a escanear",options:[["All","Todos"],["CFD","CFD"],["Forex","Forex"]]},_timeFrame:{title:"Periodo de tiempo",options:[["Short","Corto (15 minutos)","15min"],["Medium","Medio (1 hora)","1hour"],["Long","Largo (1 día)","1day"]]},table:{head:["Fuerza","S&iacute; mbolo","Se&ntilde;al",'<a href="javascript:void(0)" data-toggle="expandOrCollapse"><i class="plus square outline icon"></i></a>'],details:{title:"Detalles",up:"Arriba",down:"Abajo",neutral:"Neutral",off:"Apagado"},signal:{buy:"Comprar",sell:"Vender",none:"Ninguno"}},submitBtn:"Analizar",lastUpdated:"&Uacute;ltimo an&aacute;lisis:",timezoneFormat:"MM-DD-YYYY, h:mm:ss a"},gr:{_language:"gr",_symbToScan:{title:"ΣΥΜΒΟΛΑ ΠΡΟΣ ΑΝΙΧΝΕΥΣΗ",options:[["All","Όλα"],["CFD","CFD"],["Forex","Forex"]]},_timeFrame:{title:"Time Frame",options:[["Short","Βραχυπρόθεσμο (15 λεπτά)","15min"],["Medium","Μεσοπρόθεσμο (1 ώρα)","1hour"],["Long","Μακροπρόθεσμο (1 ημέρα)","1day"]]},table:{head:["Ισχύς","Σύμβολο","Σήμα",'<a href="javascript:void(0)" data-toggle="expandOrCollapse"><i class="plus square outline icon"></i></a>'],details:{title:"Λεπτομέρειες",up:"Up",down:"Down",neutral:"Neutral",off:"Off"},signal:{buy:"ΑΓΟΡΑ",sell:"ΠΩΛΗΣΗ",none:"None"}},submitBtn:"ΑΝΙΧΝΕΥΣΗ",lastUpdated:"Τελευταία Ανίχνευση: ",timezoneFormat:"MM-DD-YYYY, h:mm:ss a"}},timezone:"America/New_York"};function validationpassed(e){var k=$(e.wrapper),M=e.labels,T=e.symbolRates,x=e.symbolIndicators,_=e.numRatesToShow,Y=e.timezone,U=e.timezoneFormat;if(null===T)return k.find(".css-loader").hide(),k.find(".scanner-error").removeClass("hidden"),!1;$(".toggler").map(function(){return this}).get();var a=$(this).find("i");a.removeClass("minus square outline icon"),a.addClass("plus square outline icon");var R=function getRandomIntInclusive(e,a){return e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e+1))+e}(0,1e4),t=(k.attr("id")+R).replace(/[^a-zA-Z0-9]/g,"_");return $.ajax({type:"GET",url:"https://widget.fxcorporate.com/MarketScanner",jsonpCallback:t,dataType:"jsonp",cache:!1,crossDomain:!0,success:function(e,a,t){var s=e;k.find(".css-loader").hide(),k.show();var i,n,r,l=[],o=[],c=[],d=[],u=[],m=[],g=[];if(n=k.find("#time-frame :selected").val(),i=k.find("#symbols-to-scan :selected").val(),0===k.find("#symbols-to-scan")[0].selectedIndex)for(var p=1;p<M._symbToScan.options.length;p++)u.push(M._symbToScan.options[p][0]);else u.push(i);for(p=0;p<M._timeFrame.options.length;p++)n===M._timeFrame.options[p][0]&&(r=M._timeFrame.options[p][2]);for(var b in x)$("#"+b).is(":checked")&&m.push(b);$(s).each(function(e,a){$.each(a,function(e,a){g.push(e),$.each(a,function(e,a){$.each(a,function(e,a){var t=e.split(";")[0],s=e.split(";")[1];l=[],o=[];var i={};$.each(a,function(e,a){r===a.TimeFrame&&($.each(m,function(e){m[e]===a.Indicator&&$.each(u,function(e){u[e]===s&&(i.timeframe=a.TimeFrame,i.indicator=a.Indicator,i.value=a.Value,i.instrumentType=s,l.push(i))})}),(i={}).timeframe=a.TimeFrame,i.indicator=a.Indicator,i.value=a.Value,i.instrumentType=s,o.push(i),d[t]=o,0!==l.length&&(c[t]=l))})})})})}),v=0;var f=[],h={};Object.keys(c).forEach(function(a){v=0,$.each(c[a],function(e){v+=c[a][e].value}),(h={}).sum=Math.abs(v),h.symbol=a,h.object=c[a],f.push(h)}),Object.keys(d).forEach(function(e){k.find("#positiveRow"+e.replace(/\//g,"")).remove(),k.find("#negativeRow"+e.replace(/\//g,"")).remove(),k.find("#neutralRow"+e.replace(/\//g,"")).remove(),k.find(".cat"+e.replace(/\//g,"")).remove()}),f.sort(function(e,a){return a.sum-e.sum});var v=0,y=0;u=T;var S,w=[];for(p=0;p<f.length;++p){if(v===f[p].sum);else{var F=swap(u,f,y,p);v=f[p].sum,y=p;for(var C=0;C<F.length;C++)w.push(F[C])}if(p===f.length-1)for(F=swap(u,f,w.length,f.length),C=0;C<F.length;C++)w.push(F[C])}c=[];for(p=0;p<u.length;++p)p<=_-1&&(c[w[p].symbol]=w[p].object);Object.keys(c).forEach(function(a){var t=0;$.each(c[a],function(e){t+=c[a][e].value});var e=a.replace(/\//g,""),s=function getStrength(e,a){var t=0;switch(e){case 1:switch(a){case 1:t=3}break;case 2:switch(a){case 1:t=2;break;case 2:t=3}break;case 3:switch(a){case 1:t=1;break;case 2:t=2;break;case 3:t=3}break;case 4:switch(a){case 1:t=1;break;case 2:t=2;break;case 3:case 4:t=3}break;case 5:switch(a){case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:t=3}break;case 6:switch(a){case 1:case 2:t=1;break;case 3:case 4:t=2;break;case 5:case 6:t=3}break;case 7:switch(a){case 1:case 2:t=1;break;case 3:case 4:case 5:t=2;break;case 6:case 7:t=3}}return t}(m.length,Math.abs(t)),i=function getRowData(e,a){var t=null;switch(!0){case 0<e:t={id:"positiveRow",signal:"signal-strength-green",class:"positiveStrength",action:a.table.signal.buy,detail:a.table.details.title};break;case e<0:t={id:"negativeRow",signal:"signal-strength-red",class:"negativeStrength",action:a.table.signal.sell,detail:a.table.details.title};break;default:t={id:"neutralRow",signal:"signal-strength-red",class:"neutralStrength",action:a.table.signal.none,detail:a.table.details.title}}return t}(t,M);S=function tableRow(e,a,t,s){if("object"!=typeof e&&!e.length||"string"!=typeof a&&!a.length||"string"!=typeof t&&!t.length)return!1;var i="";return i+='<tr align="center" id="'+e.id+a.replace(/\//g,"")+'">',i+='<td class="'+e.class+'">',i+='<ul class="reset signal-strength '+e.signal+'">',i+='<li class="very-weak"><div class="very-weak-bar"></div></li>',i+='<li class="weak"><div class="weak-bar"></div ></li>',i+='<li class="strong"><div class="strong-bar"></div></li>',i+="</ul>",i+="</td>",i+='<td class="'+e.class+'">',i+=a,i+='<rates-widget id="rates-widget-'+t+s+'" class="rw ng-scope"><rw-view rates="rates" timestamp="timestamp" live-state="liveState" symbols="'+t+'" template-url="rates-market-scanner.html" class="ng-isolate-scope"/>',i+="</rates-widget>",i+="</td>",i+='<td class="'+e.class+'">'+e.action+"</td>",i+='<td class="'+e.class+'"><a  href="javascript:void(0)" class="toggler" data-prod-cat="'+a.replace(/\//g,"")+'" id="pair-expand">'+e.detail+"</a></td>",i+="</tr>"}(i,a,e,R),S+=function tableRowDetails(e,a,t,s){if("object"!=typeof e&&!e.length||"string"!=typeof a&&!a.length)return!1;var i="";for(var n in i+='<tr class="cat'+a.replace(/\//g,"")+'" style="display:none"  align="center">',i+='<td colspan="4">',i+='<table class="indicatorClass">',i+="<thead>",i+="<tr>",t)i+='<th><div class="ui popup-ctrl">'+n+"</div></th>";return i+="</tr>",i+="</thead>",i+="<tbody>",i+='<tr align="center">'+function showDetailsChart(e,a,t){var s,i="";for(var n in a){s=findIndicatorData(e,n);var r=null;switch(!0){case 0<s.value:r={class:"chevron green circle up icon",label:t.up};break;case s.value<0:r={class:"chevron red circle down icon",label:t.down};break;case 0===s.value:r={class:"minus icon",label:t.neutral};break;default:r={class:"remove circle icon",label:t.off}}i+="<td>",i+='<div class="ui popup-ctrl"><i class="'+r.class+'"></i></div>',i+='<div class="ui special popup">',i+='<div class="header">'+r.label+"</div>",i+="</div>",i+="</td>"}return i}(e[a],t,s)+"</tr>",i+="</tbody>",i+="</table>",i+="</td>",i+="</tr>"}(c,a,x,M.table.details),k.find("#symbolDashboard").append(S),1===s&&(k.find(".signal-strength-green li div.very-weak-bar").addClass("green"),k.find(".signal-strength-red li div.very-weak-bar").addClass("red")),2===s&&(k.find(".signal-strength-green li div.very-weak-bar").addClass("green"),k.find(".signal-strength-green li div.weak-bar").addClass("green"),k.find(".signal-strength-red li div.very-weak-bar").addClass("red"),k.find(".signal-strength-red li div.weak-bar").addClass("red")),3===s&&(k.find(".signal-strength-green li div").addClass("green"),k.find(".signal-strength-red li div").addClass("red"));var n={language:M._language,manual:!1,static:!1,interval:1};$(document).ready(function(){new fxcm.rates.Widget(k.find("#rates-widget-"+e+R),n)})});var D=moment().tz(Y).format(U)+" (EST)";k.find(".lastScanCompletedTimestamp").empty(),k.find(".lastScanCompletedTimestamp").append(M.lastUpdated+" <b>"+D+"</b>")},error:function(e,a,t){k.find(".css-loader").hide(),k.find(".scanner-error").removeClass("hidden"),console.log(e)}}),!1}function findIndicatorData(a,t){var s={};return $.each(a,function(e){a[e].indicator===t&&(s=a[e])}),s}function swap(e,a,t,s){for(var i=[],n=0;n<e.length;n++)for(var r=t;r<s;r++)e[n]===a[r].symbol.toUpperCase()&&i.push(a[r]);return i}this.init=function(e){var a=function getSiteLanguage(){var e=null;if("string"==typeof fxcmcom.site_alias)switch(fxcmcom.site_alias){case"ar":e="ar";break;case"de":e="de";break;case"fr":e="fr";break;case"it":e="it";break;case"es":e="es";break;case"gr":e="gr";break;default:e="en"}return e}(),t=function getOptions(e,a,t){var s="string"==typeof e.language?e.language:t;s=void 0!==a.labelSet[s]?s:a.language;var i="string"==typeof e?e:e.wrapper;return{wrapper:e?i:a.wrapper,symbolIndicators:e.symbolIndicators?e.symbolIndicators:a.symbolIndicators,symbolRates:a.symbolRates=e.symbolRates?e.symbolRates:a.symbolRates,labels:s?a.labelSet[s]:a.labelSet.en,timezone:e.timezone?e.timezone:a.timezone,timezoneFormat:e.timezoneFormat?e.timezoneFormat:a.labelSet[s].timezoneFormat,numRatesToShow:e.numRatesToShow?e.numRatesToShow:a.numRatesToShow,errorMSG:e.errorMSG?e.errorMSG:a.errorMSG}}(e,o,a),s=t.wrapper,i="object"==typeof t.labels?t.labels:null,n=t.symbolIndicators,r=t.errorMSG;if(!fxcm.lib.isJqueryElement($(s)))return!1;var l=$(s);if(l.append('<div class="grid-100 txt-align-center scanner-error hidden padding-vertical-20">'+r+"</div>"),null===i||void 0===t)return l.find(".css-loader").hide(),l.find(".scanner-error").removeClass("hidden"),!1;l.addClass("language-"+i._language),l.hide(),l.append(function baseHTML_controls(e,a){var t="",s=e.table.head,i=e._symbToScan.options,n=e._timeFrame.options;t+='<div class="form row margin-bottom-10">',t+='<div class="formBox">',t+='<div class="form-cell grid-50 tablet-grid-50">',t+='<label for="symbols-to-scan">'+e._symbToScan.title+"</label>",t+='<select name="select-name" id="symbols-to-scan" class="field select">';for(var r=0;r<i.length;r++)t+='<option value="'+i[r][0]+'">'+i[r][1]+"</option>";t+="</select>",t+="</div>",t+='<div class="form-cell grid-50 tablet-grid-50">',t+='<label for="time-frame">'+e._timeFrame.title+"</label>",t+='<select name="select-name" id="time-frame" class="field select">';for(var r=0;r<n.length;r++)t+='<option value="'+n[r][0]+'">'+n[r][1]+"</option>";for(var l in t+="</select>",t+="</div>",t+='<div class="toggle-controls grid-100 grid-flush">',a){var o=!0===a[l]?"checked":null;t+='<div class="form-cell grid-25 tablet-grid-20 mobile-grid-33">',t+='<div class="toggle-checkbox indicator'+l+'">',t+='<label for="'+l+'">',t+='<input type="checkbox" name="'+l+'" id="'+l+'" '+o+">",t+='<div class="slider"></div>',t+="<span>"+l+"</span>",t+="</label>",t+="</div>",t+="</div>"}t+="</div>",t+='<div class="form-cell form-cell-submit grid-50 float-right">',t+='<a href="javascript:void(0)" class="btn submit margin-0" >'+e.submitBtn+"</a>",t+="</div>",t+='<div class="grid-100">',t+='<div class="has-bdr margin-vertical-10">',t+='<b class="bdr bdr-solid bdr-divider"></b>',t+="</div>",t+='<div class="ui error message"></div>',t+="</div>",t+="</div>",t+="</div>",t+='<p id="ratesWidget2"></p>',t+='<table id="symbolDashboard">',t+="<thead>",t+="<tr>";for(var r=0;r<s.length;r++)t+="<th>"+s[r]+"</th>";return t+="</tr>",t+="</thead>",t+="<tbody></tbody>",t+="</table>",t+='<p class="txt-10 margin-top-20 txt-align-right lastScanCompletedTimestamp"></p>'}(i,n)),function hoverEvents(e){$(document).on({mouseenter:function(){$(this).siblings().addClass("active")},mouseleave:function(){$(this).siblings().removeClass("active")}},e)}(".ui.popup-ctrl"),function revealTable(e,t){$(document).on("click",e,function(e){var a=$(e.target)||$(e.srcElement);$(".cat"+$(this).attr("data-prod-cat"),a.closest(t)).slideToggle("fast",function(){$(this).animate()})})}("#pair-expand",l),function revealAllTable(e,n){$(e).click(function(e){e.preventDefault(),e.stopImmediatePropagation();var a=$(e.target)||$(e.srcElement),t="",s=$(".toggler",a.closest(n)).map(function(){return this}).get();t=a.hasClass("plus")?(a.removeClass("plus").addClass("minus"),":hidden"):(a.addClass("plus").removeClass("minus"),":visible");for(var i=0;i<s.length;i++)$(".cat"+$(s[i]).attr("data-prod-cat"),a.closest(n)).is(t)&&$(".cat"+$(s[i]).attr("data-prod-cat"),a.closest(n)).toggle()})}("[data-toggle='expandOrCollapse']",l),validationpassed(t),l.find(".submit").on("click",function(e){validationpassed(t)})}},jQuery(document).ready(function(){fxcm.marketScanner.init("#market-scanner")});
//# sourceMappingURL=market-scanner.min.js.map
